import{j as e,l as F,m as E,J as k,s as S,r as g,R as c,t as T,as as B,c as A,f as y,Z as m}from"./index-2a44fdcc.js";import{g as v}from"./index.esm-feb5e134.js";import{F as R,a as q}from"./formik.esm-9f82e298.js";import{c as U,a as I}from"./index.esm-6d8e275a.js";import{I as M}from"./index-7661f2ba.js";import{B as $}from"./index-7c566a6e.js";import{S as p}from"./sweetalert2.all-46b1fbb2.js";import"./label-561808e2.js";const G=h=>{var l;const{prefixes:s,onClickActionsPrefix:o}=h;return e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center",children:"Prefix"}),e.jsx("th",{className:"text-center",children:"Actions"})]})}),e.jsx("tbody",{children:(l=s==null?void 0:s.map)==null?void 0:l.call(s,(f,i)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:f}),e.jsx("td",{children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("button",{type:"button",className:"btn btn-xs btn-success",onClick:()=>o(i,"update"),children:e.jsx(F,{})}),e.jsx("button",{type:"button",onClick:()=>o(i,"delete"),className:"btn btn-xs btn-danger",children:e.jsx(E,{})})]})})]},i))})]})})},J=U({prefix:I().required("Prefix is required")}),H=h=>{const{configEnterprise:s,setConfigEnterprise:o}=k(),{prefixes:l=[]}=s,{closeModal:f}=S(),[i,j]=g.useState(),[r,d]=g.useState();function N(){d("create")}function b(){d(null),j(null)}function w(n,P){P==="update"?(j(l[n]),d("update")):(f(),p.fire({title:"Are you want to delete this prefix?",text:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",cancelButtonText:"No"}).then(async t=>{if(t.isConfirmed)try{const a=l.filter((x,u)=>u!==n);await y.configEnterpriseService.update({...s,prefixes:a}),o({...s,prefixes:a}),m.success("Prefix deleted.")}catch(a){console.log(a),m.error("Error deleting prefix.")}}))}const C=async(n,P)=>{try{let t;if(r==="create"){if(s.prefixes.includes(n.prefix))throw new Error("Prefix already exists.");t=[n.prefix,...s.prefixes]}else if(r==="update"){if(s.prefixes.filter(x=>x!==i).includes(n.prefix))throw new Error("Prefix already exists.");t=s.prefixes.map((x,u)=>u===s.prefixes.indexOf(i)?n.prefix:x)}const a=await y.configEnterpriseService.update({...s,prefixes:t});o(a.data),b(),r==="create"?p.fire("Prefix created successfully.","","success"):p.fire("Prefix updated successfully.","","success")}catch(t){m.error(t.message||"Error updating prefix."),console.log(t)}finally{}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-lg",children:[e.jsx(c,{isTrue:!r,children:"New Prefix"}),e.jsx(c,{isTrue:r,children:r==="create"?e.jsxs("span",{className:"flex text-sm items-center gap-2",children:[e.jsx("span",{children:"Creating Prefix"})," ",e.jsx(T,{})]}):e.jsxs("span",{className:"flex text-sm items-center gap-2",children:[e.jsx("span",{children:"Updating Prefix"})," ",e.jsx(B,{})," "]})})]}),e.jsx(c,{isTrue:!r,children:e.jsx("button",{className:"btn btn-primary btn-sm",type:"button",onClick:N,children:"Add Prefix"})}),e.jsx(c,{isTrue:r,children:e.jsxs("button",{className:"btn btn-warning btn-sm gap-2",type:"button",onClick:b,children:[e.jsx(v,{})," Go Back"]})})]}),e.jsx(c,{isTrue:!r,children:e.jsx(G,{onClickActionsPrefix:w,prefixes:s.prefixes})}),e.jsx(c,{isTrue:r,children:e.jsx(R,{initialValues:{prefix:i},onSubmit:C,validationSchema:J,children:e.jsxs(q,{children:[e.jsx(M,{name:"prefix",label:"Prefix name"}),e.jsx($,{className:A("btn-sm mb-0",r==="create"?"btn-primary":"btn-success"),full:!0,children:r==="create"?"Create Prefix":"Update Prefix"})]})})})]})};export{H as default};
