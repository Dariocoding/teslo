import{j as e,A as R,e as c,l as C,m as F,n as I,f as u,q as A,g as V,y as E,s as f,r as m,b as H,N as T,p as g,v as p,I as U,_ as j}from"./index-3ba1a706.js";import{H as k}from"./index-a1d8defb.js";import{t as n}from"./translate-092d59f9.js";import L from"./FormBrand-27c51771.js";import{u as y}from"./useQueryState-40058bbe.js";import{T as Y}from"./index-0ed25d5a.js";import q from"./ModalDeleteBrand-598acc85.js";import"./index-6654b9c9.js";import"./emotion-is-prop-valid.esm-9ab032ed.js";import"./index-f98b8c3b.js";import"./index-ef1fda9f.js";import"./formik.esm-082975a3.js";import"./index-e73b124f.js";import"./label-7eeebea1.js";import"./useTimeOutMessage-9ac15e50.js";import"./index.esm-8e4abcfc.js";import"./DataTable-eb9c6d6c.js";import"./react-paginate-dac8dd77.js";import"./useMedia-ab89cd6a.js";import"./index-f4c330e0.js";import"./capitalize-1790f93b.js";import"./ActionsProducts-4401bd9e.js";import"./DropdownItem-3f2e4d6d.js";import"./index.esm-903abc48.js";import"./index-a50f4fdd.js";import"./index.esm-431b757e.js";import"./index.esm-b422dff9.js";import"./TablePlaceholder-35369399.js";import"./index.esm-6b48a1be.js";import"./useFirstLoad-5784d01c.js";import"./index.esm-65f99a51.js";import"./Lightbox-8b83decb.js";import"./ConfirmModal-fa012840.js";const _=t=>{const{brand:s,onDelete:o,onUpdate:l}=t;return e.jsxs("div",{className:"grid lg:grid-cols-12 lg:gap-8 gap-4",children:[e.jsxs("div",{className:"tile lg:col-span-4",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("h6",{children:s.title})}),e.jsx(R,{validRoles:[c.ValidRoles.ADMIN,c.ValidRoles.SUPER_USER,c.ValidRoles.SUPERVISOR],children:e.jsxs("div",{className:"flex flex-col justify-end w-full h-full items-end",children:[e.jsxs("button",{onClick:l,className:"mx-auto w-full btn btn-primary btn-sm",children:[n("app.edit")," ",e.jsx(C,{className:"ml-2"})]}),e.jsxs("button",{className:"mx-auto w-full btn btn-danger btn-sm",onClick:o,children:[n("app.delete")," ",e.jsx(F,{className:"ml-2"})]})]})})]}),e.jsxs("div",{className:"tile lg:col-span-8",children:[e.jsx("h4",{className:"mb-6",children:s.title}),e.jsxs("div",{className:"text-sm space-y-3",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"ID:"})," ",s.idbrand]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Date Created:"})," ",I(s.dateCreated).format("DD/MM/YYYY HH:mm:ss")]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Slug:"})," ",s.slug]})]})]})]})};async function K(t){const{queryKey:s}=t,{data:o}=await u.brandsService.getBrand(s[1]);return o}function z(t){return y(["brand",t],K,null)}async function O(t){const s=t.queryKey[1],{data:o}=await u.productsService.getAllProductsByBrand(s);return o}function Q(t){return y(["products-by-brand-id",t],O,[])}const $=t=>{const{brand:s}=t,{data:o,setData:l,isFetching:a,refetch:d}=Q(s.idbrand);return e.jsx("div",{className:"tile",children:e.jsx(Y,{products:o,setProducts:l,isFetching:a,refetch:d,showSelects:!1})})},Pe=t=>{const{formatMessage:s}=A(),o=V(),l=E(),{data:a,setData:d,isFetching:D}=z(l.id),N=f(r=>r.setModal),B=f(r=>r.closeModal),[S,h]=m.useState(!1),[v,b]=m.useState(null),M=()=>{const r=i=>{d({...a,...i}),B()};N({title:s({id:"brands.edit.title"}),children:e.jsx(m.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(L,{brand:a,onSuccess:r})}),size:"md"})},x=()=>h(!1),w=()=>h(!0),P=async()=>{try{b(!0),await u.brandsService.delete(a.idbrand),x();const r=s({id:"brands.deleted.success"});j.success(r),o(g.brands.path)}catch(r){console.log(r);const i=s({id:"brands.deleted.error"});j.error(r.response.data.message||i)}finally{b(!1)}};return D?e.jsx(H,{loading:!0}):a?e.jsxs(k,{to:p.brands.path,title:n("brands.single"),icon:e.jsx(U,{}),breadcrumbs:[{label:n("dashboard.title"),to:p.home.path},{label:n("brands.title"),to:p.brands.path},{label:(a==null?void 0:a.title)||n("brands.single")}],children:[e.jsx(_,{brand:a,onDelete:w,onUpdate:M}),e.jsx($,{brand:a}),e.jsx(q,{onAcceptDelete:P,onClose:x,show:S,brand:a,isLoading:v})]}):e.jsx(T,{replace:!0,to:g.categories.path})};export{Pe as default};
