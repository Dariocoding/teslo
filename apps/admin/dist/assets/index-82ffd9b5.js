import{q as T,r as c,g as j,o as N,y as k,j as s,R as v,c as a,f as g,v as x,Z as n}from"./index-2a44fdcc.js";import{A as L}from"./index-bf229a87.js";import{d as S}from"./index.esm-e1740010.js";import{F as D,a as I}from"./formik.esm-9f82e298.js";import{I as u}from"./index-7661f2ba.js";import{B as P}from"./index-7c566a6e.js";import{t as o}from"./translate-b34db3f3.js";import{b as A}from"./index.esm-feb5e134.js";import{S as F}from"./sweetalert2.all-46b1fbb2.js";import"./styled-components.browser.esm-2c93ef95.js";import"./emotion-is-prop-valid.esm-9ab032ed.js";import"./emotion-unitless.esm-475d8cc4.js";import"./index-b442d63a.js";import"./index-bc927370.js";import"./index-503cc3cd.js";import"./label-561808e2.js";const E={password:"",passwordConfirm:""},X=C=>{const{formatMessage:m}=T(),[r,w]=c.useState(null),d=j(),{colors:e}=N(),{iduser:b,token:p}=k(),[h,f]=c.useState(!0);c.useEffect(()=>{async function t(){try{f(!0);const i=await g.usersService.getUserByIdAndToken(b,p);w(i.data)}catch(i){console.log(i),d(x.home.path)}finally{f(!1)}}t()},[]);const y=async t=>{if(t.password!==t.passwordConfirm)return n.error(m({id:"login.recover.error.passwordDoNotMatch"}));const i=n.loading(m({id:"login.recover.loading.toast"}));try{const l={...t,email:r==null?void 0:r.email,iduser:r.iduser,token:p};await g.usersService.recoverPassword(l),F.fire(m({id:"login.recover.success"}),"","success"),d(x.home.path)}catch(l){console.log(l),n.error(l.message)}finally{n.dismiss(i)}};return s.jsxs(L,{showLogo:!0,children:[s.jsx(v,{isTrue:h,children:s.jsx("div",{className:"flex items-center justify-center absolute w-full h-full top-0 left-0 z-10 bg-white bg-opacity-10 backdrop-filter backdrop-blur-[2px] rounded-lg",children:s.jsx(S,{className:"text-2xl w-12 h-12 text-black animate-spin"})})}),s.jsx(D,{initialValues:E,onSubmit:y,children:s.jsxs(I,{className:"mt-4",children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("h6",{className:a("text-center text-xl flex items-center justify-center",e.isThemed&&e.isThemeDarkLogin&&"text-gray-100"),children:[s.jsx("span",{children:o("login.recover.password.title")})," ",s.jsx(A,{className:a("text-base ml-1",e.isThemed&&e.isThemeDarkLogin&&"text-white")})]}),s.jsx("h6",{className:a("text-sm text-center",e.isThemed&&e.isThemeDarkLogin&&"text-gray-100"),children:(r==null?void 0:r.firstName)+" "+(r==null?void 0:r.lastName)}),s.jsx("p",{className:a(e.isThemeDarkLogin&&e.isThemed&&"text-gray-100","text-xs text-center mt-0"),children:r==null?void 0:r.email})]}),s.jsx(u,{name:"password",autoComplete:"off",type:"password",label:o("login.recover.password.label.password"),placeholder:o("login.recover.password.placeholder.password"),classNameInput:a(e.isThemed&&e.isThemeDarkLogin&&"bg-gray-800 text-gray-50 border-slate-700"),classNameLabel:a("text-xs",e.isThemed&&e.isThemeDarkLogin&&"text-gray-50"),showError:!1,showSuccess:!1}),s.jsx(u,{name:"passwordConfirm",type:"password",label:o("login.recover.confirmPassword.label.confirmPassword"),placeholder:o("login.recover.confirmPassword.placeholder.confirmPassword"),classNameInput:a(e.isThemed&&e.isThemeDarkLogin&&"bg-gray-800 text-gray-50 border-slate-700"),classNameLabel:a("text-xs",e.isThemed&&e.isThemeDarkLogin&&"text-gray-50"),showError:!1,showSuccess:!1}),s.jsx(P,{className:"btn-primary btn-sm mb-0",full:!0,disabled:h,children:o("app.save")})]})})]})};export{X as default};
