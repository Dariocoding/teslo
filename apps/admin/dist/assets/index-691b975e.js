import{j as e,r as t,L as F,ap as y,k as M,A as k,e as d,l as T,m as U,D as V,q as _,s as I,t as L,R as N,f as A,Z as D,v as g,aq as w}from"./index-5d060a31.js";import{H as z}from"./index-dddff9b7.js";import{D as H}from"./DataTable-880fcb59.js";import{T as O}from"./TablePlaceholder-02f29929.js";import R from"./FormProvider-d60ccd1d.js";import{t as o}from"./translate-df1875a3.js";import{u as q}from"./useFetchProviders-fa84d98e.js";import"./index-bb9c84f2.js";import"./emotion-is-prop-valid.esm-9ab032ed.js";import"./index-7167fa41.js";import"./formik.esm-d4024a5f.js";import"./react-paginate-3ebe4213.js";import"./useMedia-235a01df.js";import"./index-a6ad04c6.js";import"./index-830e2dd2.js";import"./label-4820e3e3.js";import"./index-844affc0.js";import"./index-fe6bc13a.js";import"./react-tooltip.min-8e0ae1f0.js";/* empty css                */import"./useQueryState-744f060d.js";const Z=c=>{const{provider:r,onClickDeleteProvider:i,onClickUpdateProvider:n}=c,l=()=>n(r),p=()=>i(r);return e.jsxs(t.Fragment,{children:[e.jsx(F,{to:y.viewProvider.fnPath(r.idprovider),className:"btn btn-success btn-xs",children:e.jsx(M,{})}),e.jsxs(k,{validRoles:[d.ValidRoles.ADMIN,d.ValidRoles.SUPER_USER,d.ValidRoles.SUPERVISOR],children:[e.jsx("button",{className:"btn btn-primary btn-xs",onClick:l,children:e.jsx(T,{})}),e.jsx("button",{className:"btn btn-danger btn-xs",onClick:p,children:e.jsx(U,{})})]})]})},$=()=>[{title:o("providers.label.name"),field:"name"},{title:o("providers.label.phone1"),field:"phone1"},{title:o("providers.label.phone2"),field:"phone2"},{title:o("providers.label.email"),field:"email"},{title:o("providers.label.actions"),field:"actions",center:!0}],B=t.lazy(()=>V(()=>import("./ModalDeleteProvider-3793f6a1.js"),["assets/ModalDeleteProvider-3793f6a1.js","assets/index-5d060a31.js","assets/index-57a2b61b.css","assets/translate-df1875a3.js","assets/ConfirmModal-61bf492c.js"])),G=c=>{const{providers:r,setProviders:i,isLoading:n}=c,{formatMessage:l}=_(),[p,h]=t.useState(!1),[m,x]=t.useState(null),[C,b]=t.useState(null),{setModal:j,closeModal:P}=I(),v={create:()=>{function s(a){i([a,...r]),P()}j({title:l({id:"providers.add.title"}),children:e.jsx(t.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(R,{onSuccess:s})}),size:"md"})},update:s=>{function a(S){i(r.map(u=>u.idprovider===S.idprovider?{...u,...S}:u)),P()}j({title:l({id:"providers.edit.title"}),children:e.jsx(t.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(R,{onSuccess:a,provider:s})}),size:"md"})},delete:s=>{h(!0),x(s)}},f=()=>{h(!1),x(null)},E=async()=>{try{b(!0),await A.providersService.delete(m.idprovider),i(r.filter(a=>a.idprovider!==m.idprovider)),f();const s=l({id:"providers.deleted.success"});D.success(s)}catch(s){console.log(s);const a=l({id:"providers.deleted.error"});D.error(a)}finally{b(!1)}};return e.jsxs(t.Fragment,{children:[e.jsx(H,{loading:n,buttons:e.jsx(k,{validRoles:[d.ValidRoles.ADMIN,d.ValidRoles.SUPERVISOR,d.ValidRoles.SUPER_USER],children:e.jsx("div",{className:"justify-start items-center flex",children:e.jsx("button",{onClick:v.create,type:"button",className:"btn btn-primary btn-xs",children:e.jsx(L,{})})})}),heading:$(),data:r.map(s=>({...s,actions:e.jsx(Z,{provider:s,onClickDeleteProvider:v.delete,onClickUpdateProvider:v.update})})),placeholder:e.jsx(O,{})}),e.jsx(N,{isTrue:p,children:e.jsx(t.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(B,{onAcceptDelete:E,show:p,isLoading:C,onClose:f,provider:m})})})]})},he=c=>{const{data:r,setData:i,isLoading:n}=q();return e.jsx(z,{to:g.dashboard.path,title:o("providers.title"),icon:e.jsx(w,{}),breadcrumbs:[{label:o("dashboard.title"),to:g.home.path},{label:o("providers.title")}],children:e.jsx("div",{className:"tile",children:e.jsx(G,{providers:r,setProviders:i,isLoading:n})})})};export{he as default};
