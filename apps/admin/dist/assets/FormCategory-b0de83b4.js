import{q as x,j as o,f as l,_ as d}from"./index-5d060a31.js";import{B as h}from"./index-a6ad04c6.js";import{I as j}from"./index-830e2dd2.js";import{u as F}from"./useTimeOutMessage-1f33819f.js";import{F as M,a as b}from"./formik.esm-d4024a5f.js";import{c as S,a as q}from"./index.esm-27ddb6fd.js";import"./label-4820e3e3.js";const _=m=>{const{onSuccess:c,category:t}=m,{formatMessage:e}=x(),a=t?"update":"create",[g,i]=F(),u={title:(t==null?void 0:t.title)||""},p=async n=>{try{let r;if(a==="create"){r=await l.categoriesService.createCategory(n);const s=e({id:"categories.add.success"});d.success(s)}else if(a==="update"){r=await l.categoriesService.updateCategory(t.idcategory,n);const s=e({id:"categories.edit.success"});d.success(s)}c&&c(r.data.category)}catch(r){console.log(r);const s=r.response.data.message;if(typeof s=="string"&&s.includes("Ya existe la llave"))i(e({id:"categories.error.name.alreadyExist"}));else if(typeof s=="string"&&s.length>0)i(r.response.data.message);else{const y=e(a==="create"?{id:"categories.add.error"}:{id:"categories.edit.error"});i(y)}}},f=S({title:q().required(e({id:"categories.error.name.required"}))});return o.jsx(M,{onSubmit:p,validationSchema:f,initialValues:u,children:o.jsxs(b,{children:[o.jsx(j,{name:"title",placeholder:e({id:"categories.placeholder.name"}),label:e({id:"categories.label.name"}),forceErrorMessage:g}),o.jsx(h,{className:"btn-primary btn-sm",full:!0,children:e(a==="create"?{id:"categories.edit.title"}:{id:"categories.add.title"})})]})})};export{_ as default};
