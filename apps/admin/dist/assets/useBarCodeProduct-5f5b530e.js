import{J as u}from"./JsBarcode-5706d625.js";import{a as c}from"./index-2a44fdcc.js";const C=a=>{var l;const[e,i]=c.useState(null),[o,t]=c.useState(!1);c.useEffect(()=>{o&&setTimeout(()=>{t(!1)},1e3)},[o]),c.useEffect(()=>{(()=>{var m;if(!a.code)return;const s=document.createElement("canvas");u(s,(m=a.code)==null?void 0:m.toString(),{displayValue:!1}),i(s)})()},[a]);const n=(l=e==null?void 0:e.toDataURL)==null?void 0:l.call(e);return{srcJsBarCode:n,copyImageJsBarCode:async()=>{const d=await g(n);try{await navigator.clipboard.write([new ClipboardItem({[d.type]:d})]),t(!0)}catch(s){console.log("Copy failed: "+s)}},copied:o,setCopied:t}},r=document.createElement("canvas"),f=r.getContext("2d");function g(a){const e=new Image;return new Promise((i,o)=>{fetch(a).then(t=>t.blob()).then(t=>{const n=URL.createObjectURL(t);e.src=n}).then(()=>{e.onload=function(){r.width=e.naturalWidth,r.height=e.naturalHeight,f.drawImage(e,0,0),r.toBlob(t=>{i(t)},"image/png")}})})}export{C as u};
