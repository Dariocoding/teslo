import{j as n,R as E,r as p,c as w,a as K,_ as Y,a2 as Z}from"./index-2a44fdcc.js";import{a as J,b as Q,c as W}from"./index.esm-bd6d80b9.js";import{C as X}from"./index-68678f62.js";/* empty css                */const ee=1e3,te=e=>Math.round(e/ee),U=({children:e})=>n.jsx("span",{className:"text-4xl",children:e}),se=e=>{const{file:t,children:c,baseUrlPreview:i=""}=e,s=typeof t=="string",u=s?t:t.name,g=s?null:t.size;return n.jsxs("div",{className:"upload-file",children:[n.jsxs("div",{className:"flex",children:[n.jsx("div",{className:"upload-file-thumbnail",children:ne({isUrlFile:s,baseUrlPreview:i,file:t})}),n.jsxs("div",{className:"upload-file-info",children:[n.jsx("p",{className:"upload-file-name",children:u}),n.jsx(E,{isTrue:g,children:n.jsxs("span",{className:"upload-file-size",children:[te(g)," kb"]})})]})]}),c]})},ne=e=>{const{isUrlFile:t,baseUrlPreview:c,file:i}=e;if(t){const s=c+"/"+i;return n.jsx("img",{src:s,alt:"",className:"upload-file-image"})}if(!t){const{type:s}=i;return s.split("/")[0]==="image"?n.jsx("img",{className:"upload-file-image",src:URL.createObjectURL(i),alt:`file preview ${name}`}):s==="application/zip"?n.jsx(U,{children:n.jsx(J,{})}):s==="application/pdf"?n.jsx(U,{children:n.jsx(Q,{})}):n.jsx(U,{children:n.jsx(W,{})})}};let x;const ae=new Uint8Array(16);function le(){if(!x&&(x=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!x))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return x(ae)}const r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).slice(1));function ie(e,t=0){return(r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]).toLowerCase()}const re=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),I={randomUUID:re};function oe(e,t,c){if(I.randomUUID&&!t&&!e)return I.randomUUID();e=e||{};const i=e.random||(e.rng||le)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){c=c||0;for(let s=0;s<16;++s)t[c+s]=i[s];return t}return ie(i)}const k=e=>Object.keys(e).map(t=>e[t]),me=e=>{const{accept:t="image/gif, image/jpeg, image/png, image/webp, image/jpg",beforeUpload:c,disabled:i,draggable:s=!0,fileList:u=[],multiple:g,onChange:b,onFileRemove:j,showList:L=!0,tip:R,uploadLimit:m,children:v,className:O,baseUrlPreview:V}=e,N=p.useRef(null),[d,f]=p.useState(u),[P,y]=p.useState(!1);p.useEffect(()=>{f(u)},[u]),p.useEffect(()=>{!g&&d.length===2&&f([d[1]])},[g,d]);const C=l=>{Y.error(l||"Upload Failed!",{position:"top-center"})},D=(l,a)=>{for(let o of l)o.tempID=oe(),a.push(o);return a},T=l=>{let a=[];return typeof m=="number"&&m!==0&&Object.keys(a).length>=m?(m===1&&(a.shift(),a=D(l,a)),k({...a})):(a=D(l,a),k({...a}))},B=l=>{const{files:a}=l.target;let o=!0;if(c){if(o=c(a,d),o===!1){C();return}if(typeof o=="string"&&o.length>0){C(o);return}}if(o){let h=T(a);f(h),b==null||b(h,d)}},S=l=>{const a=d.find((h,F)=>F===l),o=d.filter((h,F)=>F!==l);f(o),j==null||j(a)},z=l=>{var a;i||(a=N.current)==null||a.click(),l.stopPropagation()},_=()=>!s&&!v?n.jsx("button",{className:"btn btn-primary btn-sm",disabled:i,onClick:l=>l.preventDefault(),children:"Upload"}):s&&!v?n.jsx("span",{children:"Choose a file or drag and drop here"}):v,A=p.useCallback(()=>{s&&y(!1)},[s]),$=p.useCallback(()=>{s&&!i&&y(!0)},[s,i]),M=p.useCallback(()=>{s&&y(!1)},[s]),q={onDragLeave:A,onDragOver:$,onDrop:M},G=w("upload",s&&"upload-draggable",s&&!i&&"hover:border-blue-500",s&&i&&"disabled",P&&"border-blue-500",O),H=w("upload-input",s&&"draggable");return n.jsxs(K.Fragment,{children:[n.jsxs("div",{className:G,...s?q:{onClick:z},children:[n.jsx("input",{className:H,type:"file",ref:N,onChange:B,disabled:i,multiple:g,accept:t,title:"",value:""}),_()]}),R,n.jsx(E,{isTrue:L,children:n.jsx("div",{className:"upload-file-list",children:d.map((l,a)=>n.jsx(se,{file:l,baseUrlPreview:V,children:n.jsx(X,{onClick:()=>S(a),className:"upload-file-remove"})},((l==null?void 0:l.name)||l)+a))})})]})};function fe(e){return Z({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"polygon",attr:{fill:"#90CAF9",points:"40,45 8,45 8,3 30,3 40,13"}},{tag:"polygon",attr:{fill:"#E1F5FE",points:"38.5,14 29,14 29,4.5"}},{tag:"polygon",attr:{fill:"#1565C0",points:"21,23 14,33 28,33"}},{tag:"polygon",attr:{fill:"#1976D2",points:"28,26.4 23,33 33,33"}},{tag:"circle",attr:{fill:"#1976D2",cx:"31.5",cy:"24.5",r:"1.5"}}]})(e)}export{fe as F,me as U};
