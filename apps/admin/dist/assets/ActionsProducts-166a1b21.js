import{Z as f,j as e,ag as V,v as E,P as D,Q as I,q as U,g as z,S as G,f as M,T as O,r as Q,R as x,ar as T,al as $,A as H,e as p,l as L,m as Z,p as _}from"./index-5d060a31.js";import{$ as J,D as q,a as o}from"./DropdownItem-83d8cdee.js";import{I as K}from"./index.esm-f872f87b.js";import{P as W}from"./index-d9769582.js";import{t as m}from"./translate-df1875a3.js";import{j as X}from"./index.esm-8c897c47.js";import{f as Y}from"./index.esm-68a1f323.js";const ee=(a,s)=>{const{title:n,size:d,price:r,qty:t}=a,i=se(a),l=f.custom(c=>e.jsxs(J,{appear:!0,show:c.visible,className:"p-4 max-w-md relative w-full bg-white dark:bg-slate-800 shadow-lg rounded-2xl pointer-events-auto ring-1 ring-black/5 dark:ring-white/10 text-slate-900 dark:text-slate-200",enter:"transition-all duration-150",enterFrom:"opacity-0 translate-x-20",enterTo:"opacity-100 translate-x-0",leave:"transition-all duration-150",leaveFrom:"opacity-100 translate-x-0",leaveTo:"opacity-0 translate-x-20",children:[e.jsx("p",{className:"block text-base font-semibold leading-none",children:"Added to cart!"}),e.jsx("span",{className:"absolute top-4 right-4 text-black cursor-pointer",onClick:()=>f.remove(l),children:e.jsx(V,{})}),e.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 my-4"}),e.jsxs("div",{className:"flex ",children:[e.jsx("div",{className:"h-24 w-20 flex-shrink-0 overflow-hidden rounded-xl bg-slate-100",children:e.jsx("img",{src:i,alt:n,className:"h-full w-full object-cover object-center"})}),e.jsxs("div",{className:"ml-4 flex flex-1 flex-col",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex justify-between ",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium ",children:n}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:e.jsx("span",{children:d})})]}),e.jsx(W,{price:r,className:"mt-0.5"})]})}),e.jsxs("div",{className:"flex flex-1 items-end justify-between text-sm",children:[e.jsxs("p",{className:"text-gray-500 dark:text-slate-400",children:["Qty ",t]}),e.jsx("div",{className:"flex",children:e.jsx("button",{type:"button",onClick:()=>s(E.newOrder.path),className:"font-medium text-primary-6000 dark:text-primary-500 ",children:"View cart"})})]})]})]})]}),{position:"bottom-right",id:"nc-product-notify",duration:3e3})},se=a=>a.images.length?D+"/product/"+a.images[a.images.length-1]:"/img/others/box.png",te=()=>{const{addCart:a,cart:s}=I(),{formatMessage:n}=U(),d=z();return async(r,t)=>{try{G();const i=s.find(c=>c.product.id===r.id);if(i&&r.stock<i.qty+t.qty)return f.error(n({id:"orders.stockMustBeGreaterThan"},{qty:i.qty+t.qty}));const l=await M.detailTempOrdersService.create({product:r,size:t.size,qty:t.qty});a(l.data,t),ee({...r,size:t.size,qty:t.qty},d)}catch(i){console.log(i)}finally{O()}}},de=a=>{var b,y,h,k,N,v;const{product:s,onDeleteProduct:n,onUpdateProduct:d,onQuickEditProduct:r,onViewBarCode:t,showButtonCartProduct:i=!0}=a,l=te(),c=z(),R=()=>c(_.viewProduct.fnPath(s.slug)),A=()=>d(s),B=()=>n(s),F=()=>r(s),S=()=>t(s),g=u=>{var j,C,w,P;s.stock&&(!((j=s.sizes)!=null&&j.length)||((C=s.sizes)==null?void 0:C.length)===1?l(s,{qty:1,size:null}):(w=s.sizes)!=null&&w.length&&((P=s.sizes)==null?void 0:P.length)>1&&l(s,{qty:1,size:u}))};return e.jsxs(Q.Fragment,{children:[e.jsx(x,{isTrue:((b=s.sizes)==null?void 0:b.length)&&((y=s.sizes)==null?void 0:y.length)>1&&i,children:e.jsx("span",{className:"mr-1",children:e.jsx(q,{inTable:!0,displayButton:e.jsx(T,{}),classNameButton:"btn btn-warning btn-xs mb-0",disabledDisplayButton:!s.stock,children:e.jsx(o,{enableHoverClasses:!1,enablePaddings:!1,className:"",children:e.jsx("div",{className:"flex items-center text-sm",children:(k=(h=s.sizes)==null?void 0:h.map)==null?void 0:k.call(h,(u,j)=>e.jsx("span",{className:"transition hover:bg-gray-200 p-2 font-semibold",onClick:()=>g(u),children:u},j))})})})})}),e.jsx(x,{isTrue:(!((N=s.sizes)!=null&&N.length)||((v=s.sizes)==null?void 0:v.length)===1)&&i,children:e.jsx("button",{type:"button",className:"btn btn-warning btn-xs mb-0",onClick:()=>g(),disabled:!s.stock,children:e.jsx(T,{})})}),e.jsxs(q,{inTable:!0,displayButton:e.jsx("button",{type:"button",className:"btn btn-dark btn-xs",children:e.jsx($,{})}),children:[e.jsxs(o,{className:"flex items-center justify-start gap-1 text-sm",onClick:R,children:[e.jsx("span",{children:e.jsx(X,{className:"text-slate-800 text-lg"})})," ",m("products.actions.view")]}),e.jsx(x,{isTrue:t,children:e.jsxs(o,{className:"flex items-center justify-start gap-1 text-sm",onClick:S,children:[e.jsx("span",{children:e.jsx(Y,{className:"text-slate-800 text-lg"})})," ",m("products.actions.viewBarCode")]})}),e.jsxs(H,{validRoles:[p.ValidRoles.ADMIN,p.ValidRoles.SUPER_USER,p.ValidRoles.SUPERVISOR],children:[e.jsxs(o,{className:"flex items-center justify-start gap-1 text-sm",onClick:A,children:[e.jsx("span",{children:e.jsx(L,{className:"text-blue-500"})})," ",m("products.actions.edit")]}),e.jsx(x,{isTrue:r,children:e.jsxs(o,{className:"flex items-center justify-start gap-1 text-sm",onClick:F,children:[e.jsx("span",{children:e.jsx(K,{className:"text-orange-600 text-lg"})})," ",m("products.actions.quickEdit")]})}),e.jsx(x,{isTrue:n,children:e.jsxs(o,{className:"flex items-center justify-start gap-1 text-sm",onClick:B,children:[e.jsx("span",{children:e.jsx(Z,{className:"text-red-700"})})," ",m("products.actions.delete")]})})]})]})]})};export{de as A};
