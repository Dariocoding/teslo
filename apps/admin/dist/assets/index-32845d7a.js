import{f as p,j as e,l as F,m as _,n as I,r as d,D as T,q as C,g as H,y as L,s as x,b as R,N as k,p as f,v as c,I as A,R as B,_ as j}from"./index-3ba1a706.js";import{H as E}from"./index-a1d8defb.js";import{u as g}from"./useQueryState-40058bbe.js";import{t as i}from"./translate-092d59f9.js";import Y from"./ModalDeleteProvider-9859e2c2.js";import{T as q}from"./index-0ed25d5a.js";import"./index-6654b9c9.js";import"./emotion-is-prop-valid.esm-9ab032ed.js";import"./index-f98b8c3b.js";import"./ConfirmModal-fa012840.js";import"./DataTable-eb9c6d6c.js";import"./formik.esm-082975a3.js";import"./react-paginate-dac8dd77.js";import"./useMedia-ab89cd6a.js";import"./index-f4c330e0.js";import"./capitalize-1790f93b.js";import"./ActionsProducts-4401bd9e.js";import"./DropdownItem-3f2e4d6d.js";import"./index.esm-903abc48.js";import"./index-a50f4fdd.js";import"./index.esm-431b757e.js";import"./index.esm-b422dff9.js";import"./TablePlaceholder-35369399.js";import"./index.esm-6b48a1be.js";import"./useFirstLoad-5784d01c.js";import"./index.esm-65f99a51.js";import"./Lightbox-8b83decb.js";async function V(r){const{queryKey:s}=r,{data:o}=await p.providersService.get(s[1]);return o}function z(r){return g(["provider",r],V,null)}const K=r=>{const{provider:s,onDelete:o,onUpdate:l}=r;return e.jsxs("div",{className:"grid lg:grid-cols-12 lg:gap-8 gap-4",children:[e.jsxs("div",{className:"tile lg:col-span-4",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("h6",{children:s.name})}),e.jsxs("div",{className:"flex flex-col justify-end w-full h-full items-end",children:[e.jsxs("button",{onClick:l,className:"mx-auto w-full btn btn-primary btn-sm",children:[i("app.edit")," ",e.jsx(F,{className:"ml-2"})]}),e.jsxs("button",{className:"mx-auto w-full btn btn-danger btn-sm",onClick:o,children:[i("app.delete")," ",e.jsx(_,{className:"ml-2"})]})]})]}),e.jsxs("div",{className:"tile lg:col-span-8",children:[e.jsx("h4",{className:"mb-6",children:s.name}),e.jsxs("div",{className:"text-sm space-y-3",children:[e.jsxs("p",{children:[e.jsxs("span",{className:"font-bold",children:[i("providers.label.ID"),":"]})," ",s.idprovider]}),e.jsxs("p",{children:[e.jsxs("span",{className:"font-bold",children:[i("providers.label.dateCreated"),":"]})," ",I(s.dateCreated).format("DD/MM/YYYY HH:mm:ss")]}),e.jsxs("p",{children:[e.jsxs("span",{className:"font-bold",children:[i("providers.label.slug"),":"]})," ",s.slug]})]})]})]})};async function U(r){const s=r.queryKey[1],{data:o}=await p.productsService.getAllProductsByProvider(s);return o}function O(r){return g(["products-by-provider-id",r],U,[])}const Q=r=>{const{provider:s}=r,{data:o,setData:l,isFetching:t,refetch:n}=O(s.idprovider);return e.jsx("div",{className:"tile",children:e.jsx(q,{products:o,setProducts:l,isFetching:t,refetch:n,showSelects:!1})})},G=d.lazy(()=>T(()=>import("./FormProvider-cf235246.js"),["assets/FormProvider-cf235246.js","assets/index-3ba1a706.js","assets/index-57a2b61b.css","assets/index-ef1fda9f.js","assets/formik.esm-082975a3.js","assets/index-e73b124f.js","assets/label-7eeebea1.js","assets/index-1ff27b96.js","assets/react-paginate-dac8dd77.js","assets/index-afbcf810.js","assets/index-6654b9c9.js","assets/index-3f054690.css","assets/react-tooltip.min-e79f5625.js","assets/react-tooltip-a01a62b5.css","assets/_upload-6afe1282.css","assets/translate-092d59f9.js"])),ye=r=>{const{formatMessage:s}=C(),o=H(),l=L(),{data:t,setData:n,isFetching:b}=z(l.id),P=x(a=>a.setModal),y=x(a=>a.closeModal),[m,u]=d.useState(!1),[D,v]=d.useState(null),N=()=>{const a=M=>{n({...t,...M}),y()};P({title:s({id:"providers.edit.title"}),children:e.jsx(d.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(G,{provider:t,onSuccess:a})}),size:"md"})},h=()=>u(!1),S=()=>u(!0),w=async()=>{try{v(!0),await p.providersService.delete(t.idprovider),h();const a=s({id:"providers.deleted.success"});j.success(a),o(f.brands.path)}catch(a){console.log(a),j.error(a.response.data.message||s({id:"providers.deleted.error"}))}finally{v(!1)}};return b?e.jsx(R,{loading:!0}):t?e.jsxs(E,{to:c.providers.path,title:i("providers.single"),icon:e.jsx(A,{}),breadcrumbs:[{label:i("dashboard.title"),to:c.home.path},{label:i("providers.title"),to:c.brands.path},{label:(t==null?void 0:t.name)||i("providers.single")}],children:[e.jsx(K,{provider:t,onDelete:S,onUpdate:N}),e.jsx(Q,{provider:t}),e.jsx(B,{isTrue:m,children:e.jsx(d.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(Y,{onAcceptDelete:w,onClose:h,show:m,provider:t,isLoading:D})})})]}):e.jsx(k,{replace:!0,to:f.providers.path})};export{ye as default};
