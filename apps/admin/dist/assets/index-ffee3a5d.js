import{j as e,q as w,u as N,J as v,R as h,_ as b,r as g,A as y,f as S}from"./index-2a44fdcc.js";import{T as k,a as U}from"./index-b897be0f.js";import{g as F}from"./getMaximiumRol-eda8ef27.js";import{includesRolUser as j}from"./FormUser-41ee6685.js";import{B as I}from"./index-7c566a6e.js";import{I as n}from"./index-7661f2ba.js";import{S as q}from"./index-1b687f3c.js";import{t as r}from"./translate-b34db3f3.js";import{c as P}from"./capitalize-1790f93b.js";import{F as R,a as A}from"./formik.esm-9f82e298.js";import{c as E,a as f}from"./index.esm-6d8e275a.js";import"./index-503cc3cd.js";import"./index-f273d7cd.js";import"./index.esm-692625f4.js";import"./index-68678f62.js";import"./motion-710a2f4c.js";import"./useTimeOutMessage-2bcc922e.js";import"./react-paginate-2e6e26f6.js";import"./react-tooltip.min-0bea07f1.js";/* empty css                */import"./label-561808e2.js";import"./index.esm-15b0778f.js";import"./styled-components.browser.esm-2c93ef95.js";import"./emotion-is-prop-valid.esm-9ab032ed.js";import"./emotion-unitless.esm-475d8cc4.js";const T=c=>e.jsxs("section",{className:"relative block h-[500px]",children:[e.jsx("div",{className:"absolute top-0 w-full h-full bg-center bg-cover rounded",style:{backgroundImage:'url("https://images.unsplash.com/photo-1499336315816-097655dcfbda?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2710&q=80")'},children:e.jsx("span",{id:"blackOverlay",className:"w-full h-full absolute opacity-50 rounded bg-black"})}),e.jsx("div",{className:"top-auto bottom-0 left-0 right-0 w-full absolute pointer-events-none overflow-hidden h-70-px",style:{transform:"translateZ(0px)"},children:e.jsx("svg",{className:"absolute bottom-0 overflow-hidden",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 2560 100",x:0,y:0,children:e.jsx("polygon",{className:"text-blueGray-200 fill-current",points:"2560 0 2560 100 0 100"})})})]}),G=c=>{const{user:s,onSubmitUpdateUser:d,extraInitialValues:p={},extraInputsForm:u}=c,{formatMessage:t}=w();N();const{configEnterprise:o}=v(),i={lastName:s==null?void 0:s.lastName,firstName:s==null?void 0:s.firstName,email:s==null?void 0:s.email,phone:s.phone,...p};async function m(l,x){if(!j(l))l.prefix=null,l.dni=null;else if(!l.prefix.trim()||!l.dni.trim()){b.error(t({id:"users.error.dni.empty"}));return}x.setSubmitting(!0),await d(l),x.setSubmitting(!1)}const a=E({firstName:f().required(r("users.error.firstName.required")),lastName:f().required(r("users.error.lastName.required")),email:f().required(r("users.error.email.required")).email(r("users.error.email.invalid")),password:f().min(6,r("users.error.password.invalidLength"))});return e.jsx(R,{initialValues:i,onSubmit:m,validationSchema:a,children:({values:l})=>e.jsxs(A,{className:"text-start",children:[e.jsx(h,{isTrue:j(l),children:e.jsx("div",{className:"grid lg:grid-cols-4 lg:gap-4",children:e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{options:o.prefixes.map(x=>({label:P(x),value:x})),name:"prefix",label:r("users.label.prefix"),className:"mr-1.5"}),e.jsx(n,{label:r("users.label.dni"),name:"dni",placeholder:r("users.placeholder.dni"),required:!0,className:"w-full",showError:!1,showSuccess:!1})]})})})}),e.jsx(n,{label:r("users.label.firstName"),placeholder:r("users.placeholder.firstName"),name:"firstName"}),e.jsx(n,{label:r("users.label.lastName"),placeholder:r("users.placeholder.lastName"),name:"lastName"}),e.jsx(n,{label:r("users.label.email"),placeholder:r("users.placeholder.email"),name:"email"}),e.jsx(n,{label:r("users.label.phone"),placeholder:r("users.placeholder.phone"),name:"phone"}),u,e.jsx(n,{type:"password",label:r("users.label.password"),placeholder:r("users.placeholder.password"),name:"password"}),e.jsx(I,{className:"btn-primary mb-0",full:!0,children:"Update Profile"})]})})},V=c=>{const{user:s,onSubmitUpdateUser:d,validRolesActions:p="*",canUseActions:u=!0,extraInitialValuesFormUpdate:t,extraInputsFormFormUpdate:o}=c,[i,m]=g.useState("profile-data");return e.jsxs("div",{children:[e.jsx(T,{user:s}),e.jsx("section",{className:"relative bg-blueGray-200 -mt-[24rem]",children:e.jsx("div",{className:"max-w-xl mx-auto px-4",children:e.jsx("div",{className:"relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-xl rounded-lg -mt-64",children:e.jsxs("div",{className:"px-6",children:[e.jsx("div",{className:"flex flex-wrap justify-center",children:e.jsx("div",{className:"w-full px-4 flex justify-center",children:e.jsx("img",{alt:"...",src:"https://demos.creative-tim.com/notus-js/assets/img/team-2-800x800.jpg",className:"shadow-xl rounded-full h-32 align-middle border-none -m-16 -ml-20 lg:-ml-16 w-32"})})}),e.jsxs("div",{className:"text-center mt-14",children:[e.jsxs("h3",{className:"text-4xl font-semibold leading-normal text-blueGray-700",children:[s==null?void 0:s.firstName," ",s==null?void 0:s.lastName]}),e.jsxs("div",{className:"text-sm leading-normal mt-0 mb-2 text-blueGray-400 font-bold uppercase",children:[e.jsx("i",{className:"fas fa-map-marker-alt mr-2 text-lg text-blueGray-400"}),F(s==null?void 0:s.roles)]})]}),e.jsx(h,{isTrue:u,children:e.jsx(y,{validRoles:p,children:e.jsxs("div",{className:"pt-4 pb-4 border-t border-blueGray-200 text-center",children:[e.jsx(k,{className:"mb-6",selectedValue:i,setSelectedValue:m,children:e.jsx(U,{value:"profile-data",children:"Profile data"})}),e.jsx(h,{isTrue:i==="profile-data",children:e.jsx(G,{user:s,onSubmitUpdateUser:d,extraInitialValues:t,extraInputsForm:o})})]})})})]})})})})]})},B=c=>{const{user:s,initAuthenticate:d,accessToken:p}=N();async function u(t){var o,i,m;try{(o=t.password)!=null&&o.trim()||delete t.password;const a=await S.usersService.updateProfileUser(t);d({token:p,user:a.data}),b.success("User updated successfully.")}catch(a){console.log(a),b.error(((m=(i=a==null?void 0:a.response)==null?void 0:i.data)==null?void 0:m.message)||"Error updating user profile")}}return e.jsx("div",{className:"p-4",children:e.jsx(V,{user:s,onSubmitUpdateUser:u})})},ne=g.memo(B);export{ne as default};
