import{j as e,L as S,p as A,k as I,A as F,e as r,l as T,m as U,n as L,v as h,r as s,D as _,q as w,s as f,t as H,R as O,f as Y,_ as D,G as z}from"./index-2a44fdcc.js";import{H as q}from"./index-a6c3125b.js";import{D as G}from"./DataTable-201a002f.js";import{u as $}from"./useFetchCategories-8370e35c.js";import{a as B}from"./index.esm-e1740010.js";import{T as J}from"./TablePlaceholder-9eafa574.js";import{t as l}from"./translate-b34db3f3.js";import"./index-503cc3cd.js";import"./emotion-is-prop-valid.esm-9ab032ed.js";import"./index-bc927370.js";import"./formik.esm-9f82e298.js";import"./react-paginate-2e6e26f6.js";import"./useMedia-7838bc79.js";import"./useQueryState-c63bf4c4.js";const K=o=>{const{category:t,onDeleteCategory:n,onUpdateCategory:c}=o,i=()=>c(t),d=()=>n(t);return e.jsxs("div",{children:[e.jsx(S,{to:A.viewCategory.fnPath(t.idcategory),className:"btn btn-success btn-xs",children:e.jsx(I,{})}),e.jsxs(F,{validRoles:[r.ValidRoles.ADMIN,r.ValidRoles.SUPER_USER,r.ValidRoles.SUPERVISOR],children:[e.jsx("button",{className:"btn btn-primary btn-xs",onClick:i,children:e.jsx(T,{})}),e.jsx("button",{className:"btn btn-danger btn-xs",onClick:d,children:e.jsx(U,{})})]})]})},Q=o=>o.categories.map(t=>({...t,dateFormatted:L(t.dateCreated).format("DD/MM/YYYY HH:mm:ss"),actions:e.jsx(K,{category:t,...o}),titleFormatted:e.jsx(S,{to:h.viewCategory.fnPath(t.idcategory),className:"link-table",children:t.title})})),W=()=>[{title:l("categories.label.name"),field:"titleFormatted"},{title:l("categories.label.dateCreated"),field:"dateFormatted",center:!0},{title:l("categories.label.actions"),field:"actions",center:!0}],R=s.lazy(()=>_(()=>import("./FormCategory-d8622675.js"),["assets/FormCategory-d8622675.js","assets/index-2a44fdcc.js","assets/index-57a2b61b.css","assets/index-7c566a6e.js","assets/formik.esm-9f82e298.js","assets/index-7661f2ba.js","assets/label-561808e2.js","assets/useTimeOutMessage-2bcc922e.js","assets/index.esm-6d8e275a.js"])),X=s.lazy(()=>_(()=>import("./ModalDeleteCategory-37c867e1.js"),["assets/ModalDeleteCategory-37c867e1.js","assets/index-2a44fdcc.js","assets/index-57a2b61b.css","assets/ConfirmModal-b047b1ed.js","assets/translate-b34db3f3.js"])),Z=o=>{const{formatMessage:t}=w(),[n,c]=s.useState(!1),[i,d]=s.useState(null),[v,p]=s.useState(null),{data:m,setData:g,isFetching:M,refetch:P}=$(),b=f(a=>a.setModal),j=f(a=>a.closeModal),k=a=>{const u=y=>{g(m.map(x=>x.idcategory===y.idcategory?{...x,...y}:x)),j()};b({title:t({id:"categories.edit.title"}),children:e.jsx(s.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(R,{category:a,onSuccess:u})}),size:"md"})},E=()=>{const a=u=>{g([u,...m]),j()};b({title:t({id:"categories.add.title"}),children:e.jsx(s.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(R,{onSuccess:a})})})},C=()=>{c(!1),d(null)},N=a=>{c(!0),d(a)},V=async()=>{try{p(!0),await Y.categoriesService.deleteCategory(i.idcategory),g(m.filter(a=>a.idcategory!==i.idcategory)),C(),D.success(t({id:"categories.deleted.success"}))}catch(a){console.log(a),D.error(a.response.data.message||t({id:"categories.deleted.error"}))}finally{p(!1)}};return e.jsxs(s.Fragment,{children:[e.jsx(G,{placeholder:e.jsx(J,{}),buttons:e.jsxs("div",{className:"flex items-center justify-start",children:[e.jsx(F,{validRoles:[r.ValidRoles.ADMIN,r.ValidRoles.SUPER_USER,r.ValidRoles.SUPERVISOR],children:e.jsx("button",{className:"btn btn-primary btn-xs",onClick:E,children:e.jsx(H,{})})}),e.jsx("button",{className:"btn btn-outline-alternative btn-xs",onClick:()=>P(),children:e.jsx(B,{})})]}),data:Q({categories:m,onDeleteCategory:N,onUpdateCategory:k}),heading:W(),loading:M}),e.jsx(O,{isTrue:n,children:e.jsx(s.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(X,{onAcceptDeleteCategory:V,onCloseModalDelete:C,showModalDeleteCategory:n,category:i,isLoading:v})})})]})},ee=o=>e.jsx(q,{to:h.dashboard.path,title:l("categories.title"),icon:e.jsx(z,{}),breadcrumbs:[{label:l("dashboard.title"),to:h.home.path},{label:l("categories.title")}],children:e.jsx("div",{className:"tile",children:e.jsx(Z,{})})}),he=s.memo(ee);export{he as default};
