import{f as g,j as e,A as w,e as d,l as E,m as F,n as I,r as c,D as f,q as V,g as A,y as L,s as h,b as T,N as H,p as x,v as m,G as U,_ as j}from"./index-3ba1a706.js";import{u as b}from"./useQueryState-40058bbe.js";import{t as i}from"./translate-092d59f9.js";import{T as k}from"./index-0ed25d5a.js";import{H as Y}from"./index-a1d8defb.js";import"./DataTable-eb9c6d6c.js";import"./formik.esm-082975a3.js";import"./react-paginate-dac8dd77.js";import"./useMedia-ab89cd6a.js";import"./index-f4c330e0.js";import"./capitalize-1790f93b.js";import"./ActionsProducts-4401bd9e.js";import"./DropdownItem-3f2e4d6d.js";import"./index.esm-903abc48.js";import"./index-a50f4fdd.js";import"./index.esm-431b757e.js";import"./index.esm-b422dff9.js";import"./TablePlaceholder-35369399.js";import"./index.esm-6b48a1be.js";import"./useFirstLoad-5784d01c.js";import"./index.esm-65f99a51.js";import"./Lightbox-8b83decb.js";import"./ConfirmModal-fa012840.js";import"./index-6654b9c9.js";import"./emotion-is-prop-valid.esm-9ab032ed.js";import"./index-f98b8c3b.js";async function q(s){const{queryKey:t}=s,{data:o}=await g.categoriesService.getCategory(t[1]);return o}function z(s){return b(["category",s],q,null)}const B=s=>{const{category:t,onDeleteCategory:o,onUpdateCategory:l}=s;return e.jsxs("div",{className:"grid lg:grid-cols-12 lg:gap-8 gap-4",children:[e.jsxs("div",{className:"tile lg:col-span-4",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("h6",{children:t.title})}),e.jsx(w,{validRoles:[d.ValidRoles.ADMIN,d.ValidRoles.SUPERVISOR,d.ValidRoles.SUPER_USER],children:e.jsxs("div",{className:"flex flex-col justify-end w-full h-full items-end",children:[e.jsxs("button",{onClick:l,className:"mx-auto w-full btn btn-primary btn-sm",children:[i("app.edit")," ",e.jsx(E,{className:"ml-2"})]}),e.jsxs("button",{className:"mx-auto w-full btn btn-danger btn-sm",onClick:o,children:[i("app.delete")," ",e.jsx(F,{className:"ml-2"})]})]})})]}),e.jsxs("div",{className:"tile lg:col-span-8",children:[e.jsx("h4",{className:"mb-6",children:t.title}),e.jsxs("div",{className:"text-sm space-y-3",children:[e.jsxs("p",{children:[e.jsxs("span",{className:"font-bold",children:[i("categories.label.ID"),":"]})," ",t.idcategory]}),e.jsxs("p",{children:[e.jsxs("span",{className:"font-bold",children:[i("categories.label.dateCreated"),":"]})," ",I(t.dateCreated).format("DD/MM/YYYY HH:mm:ss")]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Slug:"})," ",t.slug]})]})]})]})};async function O(s){const t=s.queryKey[1],{data:o}=await g.productsService.getAllProductsByCategory(t);return o}function K(s){return b(["products-by-category-id",s],O,[])}const G=s=>{const{category:t}=s,{data:o,setData:l,isFetching:a,refetch:n}=K(t.idcategory);return e.jsx("div",{className:"tile",children:e.jsx(k,{products:o,setProducts:l,isFetching:a,refetch:n})})},Q=c.lazy(()=>f(()=>import("./FormCategory-5006cd47.js"),["assets/FormCategory-5006cd47.js","assets/index-3ba1a706.js","assets/index-57a2b61b.css","assets/index-ef1fda9f.js","assets/formik.esm-082975a3.js","assets/index-e73b124f.js","assets/label-7eeebea1.js","assets/useTimeOutMessage-9ac15e50.js","assets/index.esm-8e4abcfc.js"])),$=c.lazy(()=>f(()=>import("./ModalDeleteCategory-81ec1289.js"),["assets/ModalDeleteCategory-81ec1289.js","assets/index-3ba1a706.js","assets/index-57a2b61b.css","assets/ConfirmModal-fa012840.js","assets/translate-092d59f9.js"])),ve=s=>{const{formatMessage:t}=V(),o=A(),l=L(),{data:a,setData:n,isFetching:C}=z(l.id),v=h(r=>r.setModal),D=h(r=>r.closeModal),[N,p]=c.useState(!1),[P,u]=c.useState(null),S=()=>{const r=R=>{n({...a,...R}),D()};v({title:t({id:"categories.edit.title"}),children:e.jsx(c.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(Q,{category:a,onSuccess:r})}),size:"md"})},y=()=>{p(!1)},_=()=>{p(!0)},M=async()=>{try{u(!0),await g.categoriesService.deleteCategory(a.idcategory),y(),j.success(t({id:"categories.deleted.success"})),o(x.categories.path)}catch(r){console.log(r),j.error(r.response.data.message||t({id:"categories.deleted.error"}))}finally{u(!1)}};return C?e.jsx(T,{loading:!0}):a?e.jsxs(Y,{breadcrumbs:[{label:i("dashboard.title"),to:m.home.path},{label:i("categories.title"),to:m.categories.path},{label:a.title||t({id:"categories.single"})}],icon:e.jsx(U,{}),title:a.title||t({id:"categories.single"}),to:m.categories.path,children:[e.jsx(B,{category:a,onDeleteCategory:_,onUpdateCategory:S}),e.jsx(G,{category:a}),e.jsx($,{onAcceptDeleteCategory:M,onCloseModalDelete:y,showModalDeleteCategory:N,category:a,isLoading:P})]}):e.jsx(H,{replace:!0,to:x.categories.path})};export{ve as default};
