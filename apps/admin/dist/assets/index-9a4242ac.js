import{j as e,r as t,L as F,ap as y,k as M,A as k,e as d,l as T,m as U,D as V,q as _,s as I,t as L,R as N,f as A,Z as D,v as g,aq as w}from"./index-2a44fdcc.js";import{H as z}from"./index-a6c3125b.js";import{D as H}from"./DataTable-201a002f.js";import{T as O}from"./TablePlaceholder-9eafa574.js";import R from"./FormProvider-4b04dfb6.js";import{t as o}from"./translate-b34db3f3.js";import{u as q}from"./useFetchProviders-1d96e8ee.js";import"./index-503cc3cd.js";import"./emotion-is-prop-valid.esm-9ab032ed.js";import"./index-bc927370.js";import"./formik.esm-9f82e298.js";import"./react-paginate-2e6e26f6.js";import"./useMedia-7838bc79.js";import"./index-7c566a6e.js";import"./index-7661f2ba.js";import"./label-561808e2.js";import"./index-44c2dc6a.js";import"./index-b897be0f.js";import"./react-tooltip.min-0bea07f1.js";/* empty css                */import"./useQueryState-c63bf4c4.js";const Z=c=>{const{provider:r,onClickDeleteProvider:i,onClickUpdateProvider:n}=c,l=()=>n(r),p=()=>i(r);return e.jsxs(t.Fragment,{children:[e.jsx(F,{to:y.viewProvider.fnPath(r.idprovider),className:"btn btn-success btn-xs",children:e.jsx(M,{})}),e.jsxs(k,{validRoles:[d.ValidRoles.ADMIN,d.ValidRoles.SUPER_USER,d.ValidRoles.SUPERVISOR],children:[e.jsx("button",{className:"btn btn-primary btn-xs",onClick:l,children:e.jsx(T,{})}),e.jsx("button",{className:"btn btn-danger btn-xs",onClick:p,children:e.jsx(U,{})})]})]})},$=()=>[{title:o("providers.label.name"),field:"name"},{title:o("providers.label.phone1"),field:"phone1"},{title:o("providers.label.phone2"),field:"phone2"},{title:o("providers.label.email"),field:"email"},{title:o("providers.label.actions"),field:"actions",center:!0}],B=t.lazy(()=>V(()=>import("./ModalDeleteProvider-fdbea426.js"),["assets/ModalDeleteProvider-fdbea426.js","assets/index-2a44fdcc.js","assets/index-57a2b61b.css","assets/translate-b34db3f3.js","assets/ConfirmModal-b047b1ed.js"])),G=c=>{const{providers:r,setProviders:i,isLoading:n}=c,{formatMessage:l}=_(),[p,h]=t.useState(!1),[m,x]=t.useState(null),[C,b]=t.useState(null),{setModal:j,closeModal:P}=I(),v={create:()=>{function s(a){i([a,...r]),P()}j({title:l({id:"providers.add.title"}),children:e.jsx(t.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(R,{onSuccess:s})}),size:"md"})},update:s=>{function a(S){i(r.map(u=>u.idprovider===S.idprovider?{...u,...S}:u)),P()}j({title:l({id:"providers.edit.title"}),children:e.jsx(t.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(R,{onSuccess:a,provider:s})}),size:"md"})},delete:s=>{h(!0),x(s)}},f=()=>{h(!1),x(null)},E=async()=>{try{b(!0),await A.providersService.delete(m.idprovider),i(r.filter(a=>a.idprovider!==m.idprovider)),f();const s=l({id:"providers.deleted.success"});D.success(s)}catch(s){console.log(s);const a=l({id:"providers.deleted.error"});D.error(a)}finally{b(!1)}};return e.jsxs(t.Fragment,{children:[e.jsx(H,{loading:n,buttons:e.jsx(k,{validRoles:[d.ValidRoles.ADMIN,d.ValidRoles.SUPERVISOR,d.ValidRoles.SUPER_USER],children:e.jsx("div",{className:"justify-start items-center flex",children:e.jsx("button",{onClick:v.create,type:"button",className:"btn btn-primary btn-xs",children:e.jsx(L,{})})})}),heading:$(),data:r.map(s=>({...s,actions:e.jsx(Z,{provider:s,onClickDeleteProvider:v.delete,onClickUpdateProvider:v.update})})),placeholder:e.jsx(O,{})}),e.jsx(N,{isTrue:p,children:e.jsx(t.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(B,{onAcceptDelete:E,show:p,isLoading:C,onClose:f,provider:m})})})]})},he=c=>{const{data:r,setData:i,isLoading:n}=q();return e.jsx(z,{to:g.dashboard.path,title:o("providers.title"),icon:e.jsx(w,{}),breadcrumbs:[{label:o("dashboard.title"),to:g.home.path},{label:o("providers.title")}],children:e.jsx("div",{className:"tile",children:e.jsx(G,{providers:r,setProviders:i,isLoading:n})})})};export{he as default};
