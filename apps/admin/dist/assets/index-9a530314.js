import{j as e,L as F,p as T,k as V,A as _,e as l,l as A,m as I,r as t,D as M,q as U,s as S,t as L,n as w,v as x,R as H,f as O,_ as B,H as Y}from"./index-5d060a31.js";import{H as z}from"./index-dddff9b7.js";import{T as q}from"./TablePlaceholder-02f29929.js";import{D as $}from"./DataTable-880fcb59.js";import{a as G}from"./index.esm-68a1f323.js";import{u as J}from"./useFetchBrands-30ccf14b.js";import{t as r}from"./translate-df1875a3.js";import"./index-bb9c84f2.js";import"./emotion-is-prop-valid.esm-9ab032ed.js";import"./index-7167fa41.js";import"./formik.esm-d4024a5f.js";import"./react-paginate-3ebe4213.js";import"./useMedia-235a01df.js";import"./useQueryState-744f060d.js";const K=b=>{const{brand:a,onDeleteBrand:o,onUpdateBrand:i}=b,d=()=>i(a),c=()=>o(a);return e.jsxs("div",{children:[e.jsx(F,{to:T.viewBrand.fnPath(a.idbrand),className:"btn btn-success btn-xs",children:e.jsx(V,{})}),e.jsxs(_,{validRoles:[l.ValidRoles.ADMIN,l.ValidRoles.SUPER_USER,l.ValidRoles.SUPERVISOR],children:[e.jsx("button",{className:"btn btn-primary btn-xs",onClick:d,children:e.jsx(A,{})}),e.jsx("button",{className:"btn btn-danger btn-xs",onClick:c,children:e.jsx(I,{})})]})]})},Q=()=>[{title:r("brands.label.nameFormatted"),field:"nameFormatted"},{title:r("brands.label.dateCreated"),field:"dateFormatted",center:!0},{title:r("brands.label.actions"),field:"actions",center:!0}],g=t.lazy(()=>M(()=>import("./FormBrand-64a8a298.js"),["assets/FormBrand-64a8a298.js","assets/index-5d060a31.js","assets/index-57a2b61b.css","assets/index-a6ad04c6.js","assets/formik.esm-d4024a5f.js","assets/index-830e2dd2.js","assets/label-4820e3e3.js","assets/translate-df1875a3.js","assets/useTimeOutMessage-1f33819f.js","assets/index.esm-27ddb6fd.js"])),W=t.lazy(()=>M(()=>import("./ModalDeleteBrand-86d5d467.js"),["assets/ModalDeleteBrand-86d5d467.js","assets/index-5d060a31.js","assets/index-57a2b61b.css","assets/ConfirmModal-61bf492c.js","assets/translate-df1875a3.js"])),X=b=>{const{formatMessage:a}=U(),[o,i]=t.useState(!1),[d,c]=t.useState(null),[v,p]=t.useState(null),{data:m,setData:u,isFetching:P,refetch:k}=J(),j=S(s=>s.setModal),f=S(s=>s.closeModal),E=s=>{const n=R=>{u(m.map(h=>h.idbrand===R.idbrand?{...h,...R}:h)),f()};j({title:a({id:"brands.edit.title"}),children:e.jsx(t.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(g,{brand:s,onSuccess:n})}),size:"md"})},C=()=>{const s=n=>{u([n,...m]),f()};j({title:a({id:"brands.add.title"}),children:e.jsx(t.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(g,{onSuccess:s})})})},D=()=>{i(!1),c(null)},y=s=>{i(!0),c(s)},N=async()=>{try{p(!0),await O.brandsService.delete(d.idbrand),u(m.filter(n=>n.idbrand!==d.idbrand)),D();const s=a({id:"brands.deleted.success"});B.success(s)}catch(s){console.log(s);const n=a({id:"brands.deleted.error"});B.error(s.response.data.message||n)}finally{p(!1)}};return e.jsxs(t.Fragment,{children:[e.jsx($,{placeholder:e.jsx(q,{}),buttons:e.jsxs("div",{className:"flex items-center justify-start",children:[e.jsx(_,{validRoles:[l.ValidRoles.ADMIN,l.ValidRoles.SUPER_USER,l.ValidRoles.SUPERVISOR],children:e.jsx("button",{className:"btn btn-primary btn-xs",onClick:C,children:e.jsx(L,{})})}),e.jsx("button",{className:"btn btn-outline-alternative btn-xs",onClick:()=>k(),children:e.jsx(G,{})})]}),data:m.map(s=>({...s,dateFormatted:w(s.dateCreated).format("DD/MM/YYYY HH:mm:ss"),actions:e.jsx(K,{brand:s,onDeleteBrand:y,onUpdateBrand:E}),nameFormatted:e.jsx(F,{className:"link-table",to:x.viewBrand.fnPath(s.idbrand),children:s.title})})),heading:Q(),loading:P}),e.jsx(H,{isTrue:o,children:e.jsx(t.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(W,{onAcceptDelete:N,onClose:D,show:o,brand:d,isLoading:v})})})]})},ue=b=>e.jsx(z,{to:x.dashboard.path,title:r("brands.title"),icon:e.jsx(Y,{}),breadcrumbs:[{label:r("dashboard.title"),to:x.home.path},{label:r("brands.title")}],children:e.jsx("div",{className:"tile",children:e.jsx(X,{})})});export{ue as default};
